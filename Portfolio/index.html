<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Matriz Pixel Perfect</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
    }

    body {
      background: url('img/bg1.png') no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container {
      position: relative;
      width: 600px;
    }

    .center-image {
      width: 100%;
      height: auto;
      display: block;
      image-rendering: pixelated;
      image-rendering: crisp-edges;
    }

    .grid-overlay {
      position: absolute;
      top: calc(17px * 3.409); /* Borde superior escalado */
      left: calc(7px * 3.409); /* Borde izquierdo escalado */
      display: grid;
      grid-template-columns: repeat(9, calc(18px * 3.409)); /* Cada celda + separación */
      grid-template-rows: repeat(3, calc(18px * 3.409));
      pointer-events: none;
    }

    .cell {
      width: calc(18px * 3.409);
      height: calc(18px * 3.409);
      box-sizing: border-box;
      pointer-events: auto;
    }

    .cell a {
      display: block;
      width: 100%;
      height: 100%;
      transition: background-color 0.2s;
    }

    .sprite {
        width: calc(16px * 3.409);
        height: calc(16px * 3.409);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        image-rendering: pixelated;
        image-rendering: crisp-edges;
        transition: transform 0.2s;
        margin: auto;
        margin-top: calc(0.7px * 3.409);
    }
    .sprite.NoPixel{image-rendering:auto;}
    .cell a:hover .sprite {transform: scale(1.2);}

  </style>
</head>
<body>
  <div class="container">
    <img src="img/chestAlpha.png" alt="Cofre" class="center-image">
    <!-- <img src="img/chestBlack.png" alt="Imagen centrada" class="center-image"> -->

    <div class="grid-overlay"></div>
    <script>
        const gridData = [
            {class: "sprite-instagram", noPixel: true, link: "https://www.instagram.com/luipy.yt/"}, null, {class:"sprite-DdeDyson", noPixel: true, link:"https://doc.ldeluipy.es/dysonProject/"}, null, "sprite-compass", null, null, "sprite-cobweb", {class: "sprite-discord",  noPixel: true, link:"https://discord.com/invite/6ExMmZM6rK"},
            null, { class: "sprite-head", noPixel: true , link: 'https://sites.google.com/view/luipyofficialweb/inicio'}, null, null, {class: "sprite-painting", link: 'galeria.html'}, "sprite-cobweb", null, { class: "sprite-quil", link: "book.html" }, null,
            {class: "sprite-planetMinecraft",link:"https://www.planetminecraft.com/member/luipy/"}, null, "sprite-cobweb", null, { class: "sprite-gitLogo", noPixel: true, link: "https://doc.ldeluipy.es" }, null, null, null, {class: "sprite-youtube", noPixel: true, link: "https://www.youtube.com/channel/UC5VnQnxseYH5folERXLqxiA"}
        ];
        
    </script>
    <script>
        const spriteSet = new Set();

        gridData.forEach(cell => {
          if (typeof cell === "string" && cell.startsWith("sprite-")) {
            spriteSet.add(cell.replace("sprite-", ""));
          } else if (cell && typeof cell.class === "string" && cell.class.startsWith("sprite-")) {
            spriteSet.add(cell.class.replace("sprite-", ""));
          }
        });

        // Genera las reglas CSS dinámicamente
        const style = document.createElement("style");
        style.type = "text/css";

        spriteSet.forEach(name => {
          style.textContent += `.sprite-${name} {background-image: url('sprites/${name}.png');}\n`;
        });

        document.head.appendChild(style);

        const gridOverlay = document.querySelector(".grid-overlay");
      
        gridData.forEach(cell => {
          const cellDiv = document.createElement("div");
          cellDiv.classList.add("cell");
      
          const a = document.createElement("a");
          a.href = "#";
      
          if (cell) {
            const sprite = document.createElement("div");
            sprite.classList.add("sprite");
      
            if (typeof cell === "string") {
              sprite.classList.add(cell);
            } else {
              sprite.classList.add(cell.class);
              if (cell.noPixel) sprite.classList.add("NoPixel");
              if (cell.link) a.href = cell.link;
              if (cell.link && cell.link.startsWith("http")) a.target = "_blank";
            }
      
            a.appendChild(sprite);
          }
      
          cellDiv.appendChild(a);
          gridOverlay.appendChild(cellDiv);
        });
    </script>
      
  </div>
</body>
</html>